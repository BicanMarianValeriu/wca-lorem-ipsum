<?php
/**
 * WeCodeArt Framework.
 *
 * WARNING: This file is part of the core WeCodeArt Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package 	WeCodeArt Framework
 * @subpackage 	Support\Modules\Formatting
 * @copyright   Copyright (c) 2023, WeCodeArt Framework
 * @since 		6.3.0
 * @version		6.3.0
 */

namespace WeCodeArt\Support\Modules;

defined( 'ABSPATH' ) || exit;

use WeCodeArt\Singleton;
use WeCodeArt\Integration;
use WeCodeArt\Config\Traits\Asset;
use WeCodeArt\Conditional\Traits\No_Conditionals;

/**
 * The Lorem object.
 */
final class Lorem implements Integration {

    use Asset;
    use Singleton;
	use No_Conditionals;

	/**
	 * Send to Constructor
	 */
	public function register_hooks() {
		\add_action( 'init',						[ $this, 'register_block'	], 20, 1 );
		\add_action( 'enqueue_block_editor_assets', [ $this, 'register_assets'	], 20, 1 );
	}

	/**
	 * Register block.
	 *
	 * @return  void
	 */
	public function register_block(): void {
		\register_block_type_from_metadata( dirname( __FILE__ ) . '/block.json' );
	}
	
	/**
	 * Register assets.
	 *
	 * @return  void
	 */
	public function register_assets(): void {
		wp_enqueue_script(
			$this->make_handle(),
			$this->get_asset( 'js', 'index' ),
			[ 'wp-block-editor', 'wp-blocks', 'wp-data', 'wp-rich-text' ],
			wecodeart( 'version' )
		);
	}

	/**
	 * Get file.
	 *
	 * @return string
	 */
	public function get_asset( string $type, string $name ): string {
		$file_path = wecodeart_if( 'is_dev_mode' ) ? 'unminified' : 'minified';
		$file_name = wecodeart_if( 'is_dev_mode' ) ? $name . '.' . $type :  $name . '.min.' . $type;
		$file_path = wecodeart_config( 'paths' )['uri'] . '/inc/support/modules/lorem/assets/' . $file_path . '/' . $type . '/' . $file_name;

		return esc_url( $file_path );
	}
}